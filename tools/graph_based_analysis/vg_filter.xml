<tool id="vg_filter" name="Filter mapped vg alignments" version="0.1.0">
  <description></description>
  <command>/data/galaxy/galaxy-graph-peak-caller/static/graph_peak_caller_data/vg filter -q $q -r $r -s 2.0 $reads > $output</command>
  <inputs>
    <param format="gam" name="reads" type="data" label="Reads to filter" argument="This should be a GAM file returned by vg map."/>

    <param name="q" size="4" type="integer" value="60" label="Minimum PHRED mapping quality required to keep a read" />
    <param name="r" size="4" type="float" value="0.95" label="Minimum identity required to keep a read (approx equal to proportion of matches to read length)" />

  </inputs>
  <outputs>
    <data format="gam" name="output" label="filtered_alignments.gam" />
  </outputs>


  <help>
    This tool runs vg filter -q min_mapping_quality -r min_identity -s 2.0 input.gam > output.gam.
    The PHRED mapping quality score is -log10 of the probability that the alignment is wrong, and should be set to a suitable number depending on your needs.
    Typically, something between 30 and 60 is used, and the exact threshold used does often not make big difference, since most reads either have
    a really good alignment or a really bad alignment.

    Minimum identity is the minimum score divided by read length required (0.9 roughly means that90% matched). For an alignment to be kept,
    it must satisfy both criteria (PRED mapping quality score and identity).


  </help>

</tool>